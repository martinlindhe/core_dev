----[[platform todo]]----
	hög prio:


	session/user settings:
		- gör färdigt login-bubblan: forgot password är ej kodat än
	X - visa mer inputfält vid registerrutan (blized)


	blog:


	personlig sida:
		- implementera godkännande av relation
		- implementera "välj typ av relation" när man skickar bli-vän förfrågan



	news modul:
		- delete news funkar ej för att confirmed() skickar fel parametrar
		- vote på kvalitén (eller "rating")
  		* Gör en generell vote-modul som implementerar en ajax-gadget där man kan rösta på ett objekt,
  			tillåt flera typer t.ex VOTE_NEWSITEM, VOTE_BLOGPOST


	admin:
		- userdata fält:
			* spara userdata i tblSettings, visa tillgängliga inputfält under settings.php
			* går ej radera userdatafält options från admin
	
		- visa statistik i adminpanelen (admin_statistics.php):
			* visa ett diagram månadsvis. som visar två staplar, en för registreringar, en för inloggningar
			* måste ha ett cron-script som körs regelbundet som samlar upp alla entries från tblLogins och sparar statistik för föregående
				timme i en annan tabell
				måste även kolla nya registreringar i tblUsers


	file area:
		- visa en papperskorg, kunna drag-droppa en fil och släppa i papperskorgen (ta bort med ajax)
		- kunna ändra visningsordningen på bilderna genom att dra & släppa dom + ajax save
		- kunna lägga till & redigera bildbeskrivning (kort text) och en längre text tillhörande bilden (piggy)
		- kunna kommentera bilder, som på bilddagboken. ägare/admin kunna radera komments (piggy)
		- kunna flytta en fil från en kategori till en annan (js function move_selected_file() finns) (piggy)
		- byta värdena för file types (FILETYPE_WIKI etc) att börja från 1 iställer för från 100
		- bugg: ajax show info, filesize är orginal upload size innan filen resizades
		- ta bort logiken som skapar nya kataloger från Files klassen, gör en funktion som visar en setup-guide
		- öppna "pass thru" fil-länkar i en ny tabb om det går med javascript
	X - gör klart "cut" i bildvisaren (kunna beskära bilder - blized)
		- gör klart "resize" i bildvisaren, så man kan skala ner bilden från 100% till 0% typ


	wiki:
		- implementera stöd för "talk" page
		- [[search:url|titel]] taggar funkar inte. firefox genererar nåt fel. kanske ej går att skicka på variabler så!??!!
		- logga history för wiki file deletes via ajax


	core/lågprio/förändringar under övervägning:
  	- implementera process-servern för att konvertera bilder / skapa thumbnails
 	 	- Försök bygga en generell RSS-modul som kan återanvändas av t.ex news-modulen, wiki historik (blir i praktiken en bevakning)
		- gör en funktion som visar rss news feeds, för news-modulen, packa ihop den utspridda kod som finns i sample/news.php, sample/design_head.php
		- även nån funktion som låter en adda extra css eller ändra default css (skins!)


	misc/senare:
		- gör ett setup script för att skapa alla tabeller i databasen (och skapa ny databas med?)
		- ny feature: en personlig timezone visare. så man kan visa lokal tid, plus egna tider (som zonetick)


--------------[[projekt todo]]--------------
	lyrics:
		- edit_lyric.php: BEKRÄFTELSE innan en lyrics raderas!
		- åter-inserta de texter som pajats pga latin1->utf8 konverteringen
		- edit_record.php: kunna editera recordInfo
		- lista låtar som inte finns på nån skiva (admin)
		- lista låtar som inte tillhör nåt band (t.ex ogiltigt bandId) (admin)
		- admin: möjlighet att radera ett band

	ajax chat:
		- integrera i core vid nåt tillfälle (blized vill ha)

--[[todo legend]]--
X = hi prio task
- = topic
* = notes belonging to above topic

--------------[[changelog]]--------------
2007.05.15:
	- spider: nytt projekt


2007.05.13:
	- friends: använder atom_categories.php för att hålla contact groups (som skapas från admin)
	- userdata: påbörjat implementation
	- categories: .ownerId added
	- userdata: använder tblCategories för att implementera dropdownlistor
	- core: getProjectPath() fix-trix


2007.05.12:
	- friends: skapat sida
	- friends: visa kompislista, bli vänner, ta bort relation implemneterat


2007.05.11:
	- core: kom på ett lite finare sätt att includa core filer
	- session: login-hantering sköts nu automatiskt av sessionshanteraren.
	  skicka GET parametern "login" på vilken url som helst för att visa login-dialogen
	- session: gjort om $config['site']['web_root'] till $config['session']['web_root'], och skapat $session->web_root
	- categories: getCategoriesSelect() kan nu växla mellan kategorier med dropdownlist, används i file area kategorier
	- comments: gjort defualt css till showComments()
	- admin: fixade admin länk i left menu när man e på en admin-sida funkade ej
	- blog: kommentarer visas nu med showComments()
	- blog: gjort en funktion för att visa översikt av dina egna bloggar
	- files: generell filtyp "dokument", inkluderar .doc .txt och .pdf filer
	- categories: xhtml fix i autogenererad kod i getCategoriesSelect()
	- news: kan bifoga filer till nyheter
	- news: css meny på nyhetsartiklarna (edit, delete, attachments, comment)
	- news: ändrat så news markeras som deleted men tas ej bort i databasen
	- news: kan ej längre dubbel-submitta news
	- news: speciell css för rss-enabled news artikel header .news_title_rss
	- profil: ny sida
	- profil: visar "mina filer", "mina bloggar", "inställningar" under personlig sida
	- gästbok: ny funktion
	- files: gjorde en generell dokument-ikon, skrotade pdf-ikonen
	- gästbok: auto-moderation trigger på känslig text, admin testat osv
	- admin: gjort en navigationsmeny


2007.05.10:
	- lyrics: visa ej "log in" om man e inloggad
	- lyrics: cleanupText() uppstädad, den fuckade upp en del unicode-text
	- lyrics: import tracklist improvements. hanterar titlar med punkt i, tex "D.O.W.N.". visar inte matches i lower case
	- lyrics: optimerat sql-queries på några sidor med väldigt mycke onödiga queries
	- lyrics: tagit bort all modereringslogik. man måste nu vara inloggad för att kunna ändra något
	- blog: stöd för kommentarer, visningen är inte gjord
	- blog: stöd för fil-attachments, går ej länka in bilder än direkt i bloggeditorn
	- core: css fixande, hover funkar igen häråvar, och current page i createMenu() menyer är stylad korrekt nu
	- categories: gjort en generell funktion för att skapa nya kategorier, den stödjer "new blog category" och "new filearea category"
	- categories: cleanup & buggfixande, nu funkar globala kategorier som det var tänkt
	- admin: byggt adminpanel för "manage stopwords"
	- blog: byggt adminpaneler för "moderation queue"
	- news: visar edit news länk direkt på nyhetsartikeln för admins


2007.05.09:
	- blog: byggt om en massa så det funkar snarlikt som en wiki, med en egen meny & går att baka in i en annan sida, wip
	- wiki: använder createMenu() för att skapa wiki-menyn
	- blog: markerar bloggar som raderade, tas ej bort från databasen. delete blog inbyggt i showBlog()
	- zine: tog bort hela zine projektet å integrerade blog-delen i "sample" projektet
	- atom_moderation.php: ny modul med modereringsfunktioner
	- blog: "sensitive" automatisk moderering
	- db: nya tabeller tblModerationQueue, tblStopwords


2007.05.07:
	- files: skapat $files->convertImage() för att gömma undan imagemagick & exponera konverterings-funktionaliteten utanför klassen
	- admin events: möjlighet att ändra sorteringsordningen på events
	- files: ökar "maximum execution time" vid file upload, otestad, timade ut för tidigt när jag försökte uploada en större fil från jobbet
	- files: visar file size på hover på filöversikt i file arean
	- core: sätter getProjectPath() till en js variabel i början av pageload istället för å passa på den till massa funktioner
	- lang projekt: portat till nya plattformen
	- allt: renamade alla main.css till site.css
	- blogs: skapat generella funktioner för bloggar i core/functions_blogs.php
	- konverterat zine-projektet till nya plattformen
	- general: gjort createMenu() som skapar leftmenu på adblock, lyrics, sample. generell funktion för att snabbt skapa menyer
	- general: gjort linkRSSfeeds() som skapar <link> taggar för aktuell sida för att exponera alla tillgängliga rss feeds
	- core: renamade functions_comments.php, functions_categories.php, functions_revisions.php till "atom_comments.php" etc,
		eftersom dom inte är fristående "moduler"
	- categories: check om kategorin redan finns när den skapas, kan ej längre skapa identiska kategorier i news & blogs etc



2007.05.05:
	- files: ny show_image.php som visar enbart bilden, för enkel extern länkning
	- files: visar bild-bredd & höjd i ajax_fileinfo.php
	- core: tagit bort de sista for-looparna på arrayer där foreach passade bättre
	- admin: visar max upload file size i admin compat check
	- admin compat check: snyggat upp utseendet lite
	- admin ip query page skapad
	- skapade en "sample" katalog, för att bygga en exempel sajt som utnyttjar de olika funktionerna, istället för å mixa med adblock
	- session: dödar session om client user agent ändras, på samma sätt som IP change
	- adblock: tog bort settings.php
	- session: skapat tblLogins, som skapar ett entry för varje inloggning. för att kunna visa statistik över detta i admin


2007.05.03:
	- session: tydligare felmeddelande vid misslyckad inloggning
	- admin events: fixade så de olika logg-typerna har olika css, notice, warning & error


2007.04.26:
	- db: fixade så $db->showProfile() exluderar "sql connect time" när den räknar ut "php time"
	- core: flytta ut db->log() till session->log(), det fixade alla cp problem med login/logout loggande
	- files: ändrade så att bmp->jpeg konverteraren är imagemagick istället (open source,får användas kommersiellt), nconvert support finns utkommenterat
	- files: bytte namn på "allowed_image_types" etc. till "image_types" ( == standardbildformat som alla webbläsare förväntas kunna visa
	- files: lade till stöd för att konvertera svg till png vid file upload
	- files: fixat stöd för filnamn med flera punkter i filnamnet
	- core: optimerat lite sql på olika ställen
  - core: confirmed(), ny funktion som genererar en generell "är du säker på att du vill .... ja/nej" sida, wip...
  				confirmed() används av adblock/editrule.php, adblock/admin_news_delete.php
  - admin: la "edit news" koden i en egen fil


2007.04.25:
	- janina: fixade lite småbuggar som gjorde att janina-sidan inte funka längre pga core rewrite
	- lyrics: import_tracks.php: cleanup & gjort den funktionell igen
	- admin: compat check: identifierar om gd är installerat
	- files: konverterar automatiskt uppladdade bmp bilder till jpeg


2007.04.22:
	- db: $db->log() för user logged in & user logged out visade inte username i loggen
	- news: kan tagga upp heading vs body av en nyhetsartiekl med [head]xx[/head] och [body]xx[/body]
	- news: kan nu visa en enskild nyhet
	- news: fixade nyhetslänkarna från rss feeden
	- news: allt är nu på engelska
	- news admin: visar namn på editor
	- news: implementerat kommentarer
	- news: gjorde en generell comments funktion "showComments()" som listar comments, tog bor koden från functions_news.php showNews()
	- wiki: code cleanup. tog bort all kod för "Comments". ska inte använda comments på wikis, utan en "talk" page istället
	- news: kan nu skapa nyhetskategorier
	- db: added tblNews.categoryId
	- files: plockade ut den interna category koden och hookade upp den med functions_categories.php istället
	- news: kan välja kategori när man skapar en nyhet
	- news: kan nu se översikt från bara en nyhetskategori
	- news: rss feed på alla nyheter + på enskild kategori av nyheter är nu möjlig
	- adblock: visar rss news feed på startsidan
	

2007.04.20:
	- admin: en phpinfo sida
	- admin: compat check sida. visar överskådligt versioner av php mysql & apache på samma ställe och om dom är "supported"
	- admin: compat check sidan visar även om vissa php settings är fel
	- admin: compat check gjort en bra version compare funktion
	- admin: compat check visar om php extension gd saknas (fixme detectar inte gd ok..)
	- admin: compat check visar om php extension apc saknas
	- admin: skapade sidor för att visa session info & db config
	- core: gjorde $config['debug'] istället för $db->debug
	- files: ändrade kategorikoden. nu är det categoryPermissions. en user file-kategori kan antingen vara: normal, private, hidden, global (admin only)
	- db: exporterade alla mysql databaser, gör en ny db from scratch och importera tillbaka, mysql klagade om db fel å shit
	- admin: compat check basic os detection, identifierar windows
	- news: rss html tag måste va i headern, gjorde en lösning med /adblock/news.php och design_head.php, $meta_rss
	- news: implementerat rss news feed och förberett för stöd för att kunna prenumerera på en särskild kategori
	- core cleanup: $sql eller $query blev $q för sql query strängar
	- news: en separat "ny nyhet"-sida
	- news: fixade så editorId sätts vid ändringar
	- news: visar edited-by namn


2007.04.19
	- files: kan nu "download file" i filvisaren
	- files: påbörjat hantering av videofiler, behöver en videospelare i flash / silverlight
	- files: admin ser mer fileinfo än normal user
	- files: lagt till FILETYPE_USERFILE så man kan ha en "egen" fil-area åxå, och fixat så egen fil-area funkar
	- files: börjat skriva kod för att hantera flera typer av fil kategorier: normal, privat (för vänner), hemlig, global (super admin), wip


2007.04.18
	- adblock: fixade så vänsternavigeringen markerar var man är i navigeringsmenyn
	- core: news modul skapad, news admin modul skapad. tblNews skapad
	- core wiki: la till inställning för att helt gömma wiki-ramen
	- core wiki: buggfix - om inte en wiki finns så visades inget alls av wiki();
	- files: visar nu fil-inforuta för mp3:or med
	- files: visar nu fil-inforuta för "generella" filer med
	- core: gjort så att /core/ajax*.php filerna funkar som /core/file.php, de kan ta en project-name parameter för att hitta rätt include
	- core: gjort ett admin-gränssnitt som delas av alla "projekt", i /admin/
	- adblock: flyttade ut admin_events.php till /admin/


2007.04.17
	- adblock: flyttade ut den sista funktionen sendTextFile från functions_files.php och skrotade den filen
	- adblock/download.php: flyttade över all download logik + ruleset cache koden till handleAdblockDownloadRequest()
	- core: implementerade $db->getNumArray() för att returnera 1-dimensionella arrayer
	- core db: tog bort num_rows() funktionerna
	- session: fixade till editSettings() en del, http post för att spara ändringar funkar nu
	- core db: auto expanderar sql-profil-loggen ifall något sql error förekom under scriptkörningen
	- core db: varje db driver sätter nu $db->dialect, för att kunna göra specifika optimeringar för en viss dialekt t.ex mysql, samt erbjuda en fallback för andra databaser
	- core db: visar query cache config+status för mysqli-extension
	- wiki: tog bort "hide" funktionen helt
	- files: gjort funktioner som autogenererar <img> taggar för att visa en bild, och för att visa en thumbnail vid default storlek
	- core: flyttade alla funktions-include files från /functions/* till /core/*
	- adblock: rensade upp gammal config
	- session: nya funktioner: requireLoggedIn(), requireAdmin(). redirectar användaren till 'session' start_page config direktivet och stoppar scriptet
	
	
2007.04.15
	- files: kontrollerade alla file.php requests
	- files: fixade så mp3-spelaren kan avkoda '&amp;' i url:en
	- files: file upload progress med ajax callback, kräver apc extension (obs funkar ej med uploadprogress), wip


2007.04.14:
	- wiki edit funkar för ej inloggade
	- gjort ett script som gör typ detta regelbundet, med AHK:
		mysqldump --all-databases --no-data --compact > e:/devel/webroot/sql/db-structure.sql
	- core: kan nu skapa nya users från login grejen
	- wiki: implementerat paging för wiki history
	- core: gjorde en generell URLadd() funktion för att kunna klistra på variabler till aktuell url, tog bort wikiURLadd()
	- core: flyttat över /ajax/*.php till /core/ajax_*.php
	- files: om file-upload & thumbs ej finns, skapas dessa. wip detta funkar inge bra i linux
	- files: skapar .htaccess med "deny all" & tom index.html i dessa kataloger automatiskt
	- files: ny config setting: allow anon uploads, $files->anon_uploads bool
	- files: admins kan nu ta bort andras uppladdade filer
	- konverterade svnhosting koden
	- konverterade ajax_chat koden!
	- files: kan nu rotera bilder
	- files: raderar thumbs när en fil raderas eller när en bild roteras
	- wiki: visar bilder med taggen [[file:5]]
	- files: sätter nocache headers för filer som ändrats efter att sessionen startades, funkar sådär. ibland cachar browsern iallafall bilderna
	- wiki: visar history för en vanlig user på låst wiki

	
2007.04.13:
	- gjort ordentliga .htaccess så man bara stänger av directory listing


2007.04.12:
	- core: fixade en long-standing bugg i $db->log() kommandot
	- adblock ruleset.php fixad så den funkar igen, efter otestade ändringar från jobbet
	- adblock: tömde gfx/ katalogen på allt utom loggan
	- core: fixat lite med ajax.js & /ajax/*.php filerna
	- core: gjort icon_locked & icon_unlocked ikoner
	- core: db driver buggfixar vid några error-paths vilket gör att alla sql fel nu fångas av profilern
	- wiki: admins kan nu låsa en wiki, så att inte besökare/normala users kan redigera den
	- core revisions: ny kolumn för revisions för att markera: TEXT_CHANGED, FILE_UPLOADED, FILE_DELETED, WIKI_LOCKED, WIKI_UNLOCKED
	- wiki: loggar revisions för wiki lock, wiki unlock, file upload
	- revisions: tog hela history-koden från wiki till en separat funktion som e _generell_ till functions_revisions.php
	- revisions: implementerat flera typer av entries i revision-loggen, så nu visas det som revisions när den låses/låses upp, och fil laddas upp
	- core: löste problemet med addressering till ajax-funktioner i /ajax/ och /core/ genom funktionen getProjectPath()
		som skapar en parameter att skicka med alla genererade url:s mot dessa. getProjectPath() returnerar inget om projektet
		körs från rotkatalgogen i webbservern (löst i /core/file.php)
	- files: renamade FILETYPE_NORMAL_UPLOAD till FILETYPE_FILEAREA_UPLOAD



2007.04.11:
	- adblock: plockade ut paging från ruleset.php till functions_general.php makePager() funktion
	- adblock: gjorde om ruleset.php, admin_reports.php tabellhack till div & nya css klasser:
				_row_container, _row_col1, _row_col2, osv..
				Idén är att ha färdig "standard" css mall för att göra en lista med 2 eller fler kolumner i css
	- adblock: fixade så report_site.php funkar igen
	- adblock: bort med js/adblock.js, gjorde en generell "add search engine" js-funktion i /js/functions.js
	- file browser details: visa vem som laddade upp filen, och när med ett ajax-anrop /ajax/fileinfo.php
	- gjorde en ajax-loading animation reusable i /layout/ajax_loading_layer.html
	- visar thumbnails på oanvända uppladdade bilder i wiki:edit vyn
	- class.DB_MySQLi & class.DB_MySQL: istället för att returnera tomma arrayer etc vid fel, loggar fel först med db profilern!
	- wiki kommando: [[link:url|titel]] url-länk, för att stänga av <a> taggen /helt förbjuda html
	- wiki kommando: [[search:url|titel]] för att känka in quicksearch-moduler i text, wip-javascriptet funkar inte riktigt


2007.04.10:
	- wiki: kan nu länka andra wikis i text, med [[wiki:Name|title]]
	- åter-implementerat stöd för files, genom Files klassen


2007.04.08:
	- konverterat allt (?) till att använda nya "functions"
	- övergått till nya settings funktionerna
	- tog bort session ID som parameter från alla funktioner, använder $session->id istället
	- gjorde en sida wiki.php?View:Help, istället för help.php, about.php, contribute.php, subscribe.php
	- gjorde en generell tblRevisions / functions_revisions.php och använd den istället för tblInfoFieldHistory
	- wiki: config $config['wiki] ...
	- wiki: renamade allt "infofield" till wiki


2007.04.04:
	- konverterat det mesta från HTML till XHTML 1.0

2006.11.27:
	- fixade så att alla kommentarer visas till en regel, var en bugg i sql-querien pga ändringen till DATETIME


2006.11.20:
	- userId -> smallint i databasen
	- settings: sparar ändring av email
	- rensade bort oanvända includes i config.php
	- fixade firefox search engine så den funkar med ff 2.0 (krävde absolut url i filterset_search.src)
	- highlightar sökfrasen i matchande träffar i ruleset.php-sökning

2006.11.16:
	- konverterade includes till att använda samma include_all.php osv som andra projekt, och städade upp config.php,
		resultat eventuellt marginellt snabbare sidladdning pga färre includes

2006.11.15:
	- gjorde om sql-debug footern till en generell funktion för att återanväda i andra projekt
	- fixade tblUsers, tblComments, tblLogs, tblAdblockRules att använda DATETIME för att fungera med databasförändringar
	- fixat så felaktiga sql's visar en error ikon i debugloggen
	- tog bort hostname lookups på admin_reports.php: speedup

2006.11.07:
	- lade till sql time i layersql (debug)
	- fixade download.php att inte reagera på alla post-requests (nu går det att spara ändringar i infofields på download.php)
	- lade till $_SESSION['listlimit'], istället för $config['setting_listlimit'], fixade upp så att inställningen koms ihåg genom sessionen
	- tog bort url-redirekt funktionen från logout.php, så att man istället hamnar på startsidan vid utloggning
	- snyggade till css'en för footerns debug sql-view lite
	- droppade tblBugReports, används ej
	- fixade ruleset.php html så att formulär inte nestas, så flera formulär på sidan fungerar korrekt (infofield funkar nu där)
	- design_head.php: flyttade över alla js-funktioner till js/functions.js
	- tog bort file_show_image.php
	- design_head.php: tog bort browser width & height detection kod
	- design_head.php, config.php: tog bort $config['login_encrypted'], och möjlighet att logga in med sha1-kodat password
	- tog bort js/md1.js, js/sha1.js
	- optimerade functions_infofields.php getInfoField() sql när ett infofield bara ska visas

2006.11.06:
	- download.php: ändrade till att omgenerera cache i samma filnamn om det är >4h senast modifierad,
		har ingen nytta av nya filer och sparar ändringar med svn
	- nameLink(): det stod "Generated by inget nickname", fixat
	- tog bort en massa irrelevanta .php-filer
	- databasen: raderade lokala kopior av tblGeoIP, tblGeoIPCities, tblGeoIPCityNames
	- infofields kan nu ha enkodade länkar, implementerade med en site-setting $config['infofield']['allow_html']
	- fixade positionen för inloggrutan som visas i utloggat läge
	- newrule.php: tog bort "make this comment private" som default
	- contribute.php: flyttade bort add-searchengine funktionen till inc/functions.js (ny fil)
	- flyttade all js till js/*, all css till css/*

2006.10.09:
	- download.php: ändrade till att bara generera 2 cache-revisioner per dag
	- admin_events.php: visar inte location för LAN-ip'n (döljer "LAN, LAN")
	- errorhelp.php: cleanup + visar förklaring till "session timeout"
	- locales_*.php: använder locales från ../site_functions
